generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL_AIVEN")
  schemas  = ["products"]
}

enum Category {
  brushes
  stickers
  templates
  planners
  freebies

  @@schema("products")
}

model Tag {
  id       String    @id @default(cuid())
  name     String    @unique
  slug     String    @unique
  products Product[] @relation("ProductToTag")

  @@schema("products")
}

model Product {
  id                String         @id @default(cuid())
  name              String?
  old_name          String?
  old_price         Float?
  price             Float?
  description       String?
  old_description   String?
  category          Category?
  old_category      String?
  createdAt         DateTime       @default(now())
  old_date_created  DateTime?
  updatedAt         DateTime       @updatedAt
  old_date_updated  DateTime?
  zip_file_name     String?
  old_zip_file_name String?
  slug              String?
  old_slug          String?
  old_tags          String?
  tags              Tag[]          @relation("ProductToTag")
  images            ProductImage[]

  @@schema("products")
}

model ProductImage {
  id           String  @id @default(uuid())
  productId    String
  product      Product @relation(fields: [productId], references: [id], onDelete: Cascade)
  old_alt_text String?
  alt_text     String?
  url          String?
  old_url      String?

  @@schema("products")
}
